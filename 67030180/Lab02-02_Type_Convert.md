คำถาม

1.1 ทำไม 10 / 3.0 (เมื่อตัวหารเป็น float หรือ double) ถึงได้ผลลัพธ์เป็นทศนิยม แต่เมื่อตัวหารถูกแปลงเป็น int แล้วผลลัพธ์เป็นจำนวนเต็ม?
10 / 3.0 (เมื่อตัวหารเป็น float/double):
-นี่คือ "การหารแบบทศนิยม" หรือ Floating-point Division
-เหตุผล: เนื่องจากตัวถูกหาร (10 ซึ่งเป็น int) ถูก Type Promotion (เลื่อนขั้นชนิดข้อมูล) ให้เป็น float หรือ double ตามชนิดข้อมูลของตัวหาร (3.0 ซึ่งเป็น float หรือ double) ก่อนที่จะทำการคำนวณ การหารจึงเป็นการคำนวณระหว่างตัวเลขทศนิยม ทำให้ได้ผลลัพธ์ที่เป็นทศนิยม (เช่น 3.33...) และเก็บความแม่นยำของทศนิยมไว้ได้
10 / (int)3.0 (เมื่อตัวหารถูกแปลงเป็น int):
-นี่คือ "การหารแบบจำนวนเต็ม" หรือ Integer Division
-เหตุผล: เนื่องจาก 3.0 ถูก Type Casting (แปลงชนิดข้อมูล) เป็น int อย่างชัดเจน ((int)3.0 กลายเป็น 3) ทำให้การคำนวณเป็นการหารระหว่างจำนวนเต็ม (10 / 3)
-ในการหารจำนวนเต็ม ผลลัพธ์ที่ได้จะเป็นจำนวนเต็มเสมอ โดยส่วนที่เป็นทศนิยมจะถูก ตัดทิ้ง (truncation) ไม่มีการปัดเศษขึ้นหรือลง ดังนั้น 10/3 จึงได้ผลลัพธ์เป็น 3 ครับ

2.1
1. เพื่อให้ได้ผลลัพธ์ที่แม่นยำในการคำนวณ (โดยเฉพาะการหาร)
สถานการณ์: เมื่อคุณต้องการให้ผลลัพธ์ของการคำนวณ (โดยเฉพาะการหาร) ออกมาเป็น ทศนิยม ทั้งๆ ที่ตัวแปรเริ่มต้นเป็นจำนวนเต็ม
เหตุผล: หากคุณหารจำนวนเต็มด้วยจำนวนเต็ม ผลลัพธ์จะเป็นจำนวนเต็มเสมอ (ส่วนทศนิยมจะถูกตัดทิ้งไป) การทำ Type Casting ให้ตัวถูกหารหรือตัวหาร (อย่างน้อยหนึ่งตัว) เป็นชนิดข้อมูลทศนิยม (float หรือ double) ก่อนการคำนวณ จะบังคับให้การหารเป็นการหารแบบทศนิยม
2. เพื่อแปลงค่าตัวเลขให้เป็นอักขระ หรืออักขระให้เป็นค่าตัวเลข (ASCII/Unicode)
สถานการณ์: เมื่อคุณต้องการแปลงค่า ASCII ที่เป็นตัวเลขให้กลายเป็นตัวอักษร หรือต้องการทราบค่า ASCII ที่เป็นตัวเลขของตัวอักษรใดๆ
เหตุผล: ตัวแปร char เก็บค่าเป็นตัวเลข (ASCII/Unicode) อยู่แล้ว การทำ Cast จะเป็นการบอก Compiler ว่าให้ตีความตัวเลขนั้นเป็นตัวอักษร หรือตีความตัวอักขระนั้นเป็นตัวเลขตามมาตรฐาน
3. เพื่อควบคุมการทำงานของฟังก์ชันหรือไลบรารีที่ต้องการชนิดข้อมูลเฉพาะ
สถานการณ์: ฟังก์ชันบางอย่างถูกออกแบบมาให้รับพารามิเตอร์เป็นชนิดข้อมูลที่เจาะจง หรือส่งคืนค่าในชนิดข้อมูลที่เจาะจง
เหตุผล: หากคุณมีตัวแปรในชนิดข้อมูลที่แตกต่าง แต่ต้องการส่งผ่านไปยังฟังก์ชันนั้นๆ คุณอาจต้องทำ Type Casting เพื่อให้เข้ากับข้อกำหนดของฟังก์ชัน หรือเพื่อให้ผลลัพธ์จากฟังก์ชันถูกเก็บในชนิดข้อมูลที่คุณต้องการ
4. เพื่อหลีกเลี่ยง Warning หรือ Error จาก Compiler (การแปลงชนิดข้อมูลโดยนัย - Implicit Conversion)
สถานการณ์: บางครั้ง Compiler อาจพยายามแปลงชนิดข้อมูลให้คุณโดยอัตโนมัติ (Implicit Conversion) แต่ถ้าการแปลงนั้นอาจทำให้ข้อมูลสูญหาย (เช่น แปลง float เป็น int ที่ทศนิยมจะหายไป) Compiler อาจจะแจ้งเตือน (Warning) หรือในบางกรณีอาจเป็นข้อผิดพลาด (Error)
เหตุผล: การทำ Type Casting อย่างชัดเจนเป็นการบอก Compiler ว่า "ฉันรู้ว่ากำลังทำอะไรอยู่ และฉันยอมรับว่าอาจมีการสูญเสียข้อมูลหรือการเปลี่ยนแปลงเกิดขึ้น" ทำให้ Compiler ไม่เตือนหรือหยุดการคอมไพล์
